<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <meta charset="UTF-8">
    <title>Estimazon</title>
  </head>
  <body>
    <div class="titulo">
      <div class="botones-ocultos" id="botones-comprador" style="display:none;">
        <button class="boton" onclick=resetAllCookies()>Cerrar sesión</button>
        <button class="boton" onclick="location.href='zonas/anyadir_domicilio.html'">Añadir domicilio</button>
        <button class="boton" onclick="location.href='zonas/indicar_entrega.html'">Indicar zona de entrega</button>
      </div>
      ESTIMAZON
      <div class="botones">
        <button class="boton" onclick="location.href='iniciar_sesion.html'">Identifícate</button>
        <button class="boton">
          <img src="carrito.png" alt="Carrito" class="icono-carrito" />Cesta
        </button>
      </div>
    </div>
    <div class="contenedor-central contenedor-estimazon">
      <button class="boton" onclick="location.href='seguimientoPedido.php'">Alimentos</button>
      <button class="boton">Arte y Manualidades</button>
      <button class="boton">Hogar</button>
      <button class="boton">Electrónica</button>
      <button class="boton">Instrumentos Musicales</button>
      <button class="boton">Juguetes</button>
      <button class="boton">Libros</button>
      <button class="boton">Oficina y Papelería</button>
    </div>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', actualizarBotones);

    function actualizarBotones() {
      // Realizar una solicitud Ajax al servidor para obtener el tipo de usuario
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
              var tipoUsuario = xhr.responseText;

              // Verificar y ajustar la visibilidad de los elementos según el tipo de usuario
              if (tipoUsuario !== 'comprador') {
                  document.getElementById('botones-comprador').style.display = 'none';
              } else {
                  document.getElementById('botones-comprador').style.display = 'block';
              }
          }
      };
      // Realizar la solicitud al archivo PHP que obtiene el tipo de usuario
      xhr.open('GET', 'get_tipoUser.php', true);
      xhr.send();
    };

    function resetAllCookies() {
      var cookies = document.cookie.split(";");
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      }
      actualizarBotones();
    }
</script>
</html>
