<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <meta charset="UTF-8">
    <title>Estimazon</title>
  </head>
  <body>
    <div class="titulo">
      <div class="botones-ocultos" id="botones-comprador" style="display:none;">
        <button class="boton" onclick=resetAllCookies()> sesión</button>
        <button class="boton" onclick="location.href='comprador/perfil.html'">Perfil</button>
      </div>
      ESTIMAZON
      <div class="botones">
        <button class="boton" onclick="location.href='inicio-sesion/iniciar_sesion.html'">Identifícate</button>
        <button class="boton" onclick="location.href='comprador/cesta/cesta.php'">
          <img src="carrito.png" alt="Carrito" class="icono-carrito" />Cesta
        </button>
      </div>
    </div>
    <div class="contenedor-central contenedor-estimazon">
      <button class="boton" onclick="accederCategoria('Alimentos')">Alimentos</button>
      <button class="boton" onclick="accederCategoria('Arte y manualidades')">Arte y Manualidades</button>
      <button class="boton" onclick="accederCategoria('Artículos para el hogar')">Artículos para el hogar</button>
      <button class="boton" onclick="accederCategoria('Electrónica')">Electrónica</button>
      <button class="boton" onclick="accederCategoria('Instrumentos musicales')">Instrumentos Musicales</button>
      <button class="boton" onclick="accederCategoria('Juguetes')">Juguetes</button>
      <button class="boton" onclick="accederCategoria('Libros')">Libros</button>
      <button class="boton" onclick="accederCategoria('Oficina y papelería')">Oficina y Papelería</button>
      <button class="boton" onclick="accederCategoria('Catálogo')">Todo</button>
    </div>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', actualizarBotones);

    function accederCategoria(param_categoria) {
      window.location.href = 'comprador/catalogo.php?categoria=' + param_categoria;
    }

    function actualizarBotones() {
      // Realizar una solicitud Ajax al servidor para obtener el tipo de usuario
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
              var tipoUsuario = xhr.responseText;
              // Verificar y ajustar la visibilidad de los elementos según el tipo de usuario
              if (tipoUsuario !== 'comprador') {
                  document.getElementById('botones-comprador').style.display = 'none';
              } else {
                  document.getElementById('botones-comprador').style.display = 'block';
              }
          }
      };
      // Realizar la solicitud al archivo PHP que obtiene el tipo de usuario
      xhr.open('GET', 'get_tipoUser.php', true);
      xhr.send();
    };

    function resetAllCookies() {
      var cookies = document.cookie.split(";");
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      }
      actualizarBotones();
    }
</script>
</html>
